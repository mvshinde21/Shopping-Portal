package com.project.pages;

import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.BeforeTest;

import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.annotations.AfterClass;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeClass;

public class NewTest {
	WebDriver driver;
  @Test
  public void SearchFunctionalityValid() 
  {
	  driver.manage().timeouts().implicitlyWait(1000,TimeUnit.SECONDS);
	  try
		{
			WebElement searchBar = driver.findElement(By.xpath("//*[@class='search-field']"));
			searchBar.sendKeys("The Wimpy Kid Do -It- Yourself Book");
			searchBar.sendKeys(Keys.ENTER);
		
			WebElement product = driver.findElement(By.xpath("//*[@id=\"grid-container\"]/div/div/div/div/div/div[2]/h3/a"));
		
			if(product.isDisplayed() == true)
			{
				System.out.println("Pass");
			}
			
		}
		catch (NoSuchElementException e) 
		{
			System.out.println("Fail");
		}  
  }
  
  @Test
  public void SearchFunctionalityInvalid()
  {	
	  	driver.manage().timeouts().implicitlyWait(1000,TimeUnit.SECONDS);
		try
		{
			WebElement searchBar = driver.findElement(By.xpath("//*[@class='search-field']"));
			searchBar.sendKeys("laptop");
			searchBar.sendKeys(Keys.ENTER);
		
			WebElement product = driver.findElement(By.xpath("//*[@id=\"grid-container\"]/div/div/div/div/div/div[2]/h3/a"));
		}
		catch (NoSuchElementException e) 
		{
			driver.quit();
		}
  }
  
  @Test
  public void SearchFuntionalityPartial()
  {
	  driver.manage().timeouts().implicitlyWait(1000,TimeUnit.SECONDS);
	  try
		{
			WebElement searchBar = driver.findElement(By.xpath("//*[@class='search-field']"));
			searchBar.sendKeys("The Wimpy Kid Do -It- Yourself Book");
			searchBar.sendKeys(Keys.ENTER);
		
			WebElement product = driver.findElement(By.xpath("//*[@id=\"grid-container\"]/div/div/div/div/div/div[2]/h3/a"));
		
			if(product.isDisplayed() == true)
			{
				System.out.println("Pass");
			}
			
		}
		catch (NoSuchElementException e) 
		{
			System.out.println("Fail");
		}  

  }
  
  @BeforeMethod
  public void beforeMethod() 
  {
	  System.setProperty("webdriver.chrome.driver","resources/chromedriver.exe");
	  driver = new ChromeDriver();
	  driver.get("http://localhost/shopping");
	  driver.manage().window().maximize();
	  driver.manage().timeouts().implicitlyWait(1000,TimeUnit.SECONDS);
	  driver.findElement(By.xpath("/html/body/header/div[1]/div/div/div[1]/ul/li[4]/a")).click();
	  WebElement login= driver.findElement(By.name("login"));
	  JavascriptExecutor js = (JavascriptExecutor) driver;
	  js.executeScript("arguments[0].scrollIntoView();",login);

	  driver.findElement(By.id("exampleInputEmail1")).sendKeys("nishika.manira9@gmail.com");
	  driver.findElement(By.id("exampleInputPassword1")).sendKeys("miniproject123");
	  login.click();
  }

  @AfterMethod
  public void afterMethod() 
  {
	  driver.quit();
  }

}
